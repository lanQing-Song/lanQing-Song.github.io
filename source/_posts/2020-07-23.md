---
title: Git常用的一些基础指令   #文章标题
cover: 
type: 文章
comments: true    #是否显示评论模块，默认true
aplayer: true     #在需要的页面加载aplayer的js和css，请参考音乐的配置
updated:         #文章更新日期
tags: Git          #标签
categories: Git    #文章分类

---
代码笔记



<!--more-->
# 1.Git的安装

安装连接：[https://git-scm.com/downloads](https://git-scm.com/downloads)

一般按指示的步骤安装到自己想要的路劲上就行。

# 2.Git的使用方式

- 命令行方式
- 使用可视化的GUI方式

此文使用命令行方式，理由：``

- 命令行模式能够进行Git的所有操作，而GUI方式只能进行常用的Git操作。
- GUI方式的Git软件太多，各有各的喜欢，也不一定都装了GUI的软件，但每个人基本都有命令行工具，如：Mac系统有Terminal（终端），Windows有CMD、powerShell等；

# 3.Git环境配置

使用Git之前要先对其进行一些基本信息配置；

配置工作只需一次，以后升级时还会沿用现在的配置。如果需要，你随时可以用相同的方式修改已有的配置。

## 3.1.用户信息

第一个要配置的是你个人的用户名称和电子邮件地址。这两条配置很重要，每次 Git 提交时都会携带这两条信息，用于说明是谁提交了代码 ,每次输完命令后按回车执行：

```
git config --global user.name "填用户名"
git config --global user.email 你的邮箱地址，没双引号
```

## 3.2.查看配置信息

要检查已有的配置信息可以使用如下命令

`git config --list`

<u>*有时候会看到重复的变量名，那就说明它们来自不同的配置文件（比如 `/etc/gitconfig` 和 `~/.gitconfig`），不过最终 Git 实际采用的是最后一个*</u>

# 4.基本操作

**有两种方法创建Git本地仓库：**

1、在想要创建仓库的文件夹下右键选择Git Base Here调出命令窗口，执行以下命令：

`git init`

初始化后，当前目录下回出现一个名为.git的目录，Git 仓库的所有信息都包含在该目录中。

2、从已有的仓库上克隆，也可以是远程的仓库，命令如下：

`git clone [url]`

先复制地址，再点击鼠标右键就可以自动粘贴，示例如下：

`git clone git@github.com:lanQing-Song/lanQing-Song.github.io.git`

**注意：如果克隆的是私有仓库，可能弹出对话框让输入用户名和密码，输入要好克隆的仓库的用户名和密码即可**

# 5.基本概念

先来理解一下Git工作区、暂存区和版本库概念

- **工作区：**就是你在电脑上能看到的目录
- **仓库：**工作区有有一个隐藏的目录**.git**,它不属于工作区，而是Git的仓库，它里面存放着Git参考的所有数据；
- **暂存区：**英文叫stage或index，一般存放在参考（**.git目录**）下的index文件中，所以有时我们也把暂存区叫做索引（index）。
- **版本库：**版本库是参考中用来存放Git版本（提交记录）的地方，下图展示了仓库、版本库、暂存区和工作区之间的关系:

![](https://cdn.jsdelivr.net/gh/lanQing-Song/blogimages/15.webp)

# 6.提交版本

要把更改添加到版本库，需要两步：

1. 用 `git add` 命令把更改添加到暂存区；
2. 用 `git commit` 命令将暂存区中的所有内容提交到 版本库，生成新的版本节点；

若想一次添加所有的文件，可以使用以下方式之一：

- `git add .` ： 添加新文件(new)和被修改(modified)文件，不包括被删除(deleted)文件；在Shell里，后面的 `.` 代表当前目录， 所以相当于将当前目录传给了 `add` 命令；
- `git add *` ：添加所有非隐藏的的文件的变化；`*` 是 shell 语言中的通配符，能匹配所有非隐藏的文件 和 目录，所以相当于将匹配的到文件和目录都传给了 `add` 命令；
- `git add -A` ：添加所有变化；
- `git add -u` ： 添加被修改(modified)和 被删除(deleted)文件，不包括新文件(new)；
- 可以用 -m 参数后跟提交说明的方式，在一行命令中提交更新：

```
git commit -m “说明文字"
```

然后可以查看一下当前状态：

```
git status
```

# 7.推送数据到远程仓库和从远程仓库拉取数据

## 补充：

**链接远程仓库**

```
git remote add origin 仓库地址
#或者
git remote add origin_ssh 仓库地址
```

**查看远程仓库**

```
git remote -v
```

**删除远程仓库**

```
git remote rm origin
#或者
git remote rm origin_ssh
```



## 7.1

通过 `push` 命令，可把本地仓库中的数据推送到远程仓库：

```
git push
```

此时，可以查看一下远程仓库中，看是否已经包含了我们的新提交；

## 7.2

如果有其他人往远程远程仓库上推送了新的提交，我们可以执行以下命令来获取新的提交：

```
git pull
```

**忽略某些文件**

有时候我们可能想忽略一些文件，比如：`node_mode`、`.idea` 等等，但是，在执行 `status` 或 `add` 命令时，总是显示这些文件，甚至一不小心就提交了这些文件；这时我们可以在工作区根目录下创建一个名为 `.gitignore` 的文件，在该文件中列出要忽略的文件模式；这样，Git 就不会在跟踪和显示这些文件了；

文件 .gitignore 的格式规范如下：

- 所有空行或者以注释符号 ＃ 开头的行都会被 Git 忽略。
- 在一行的末尾添加注释，会使该行被Git忽略，所以注释只能独占一行，不能添加在行的末尾；
- 可以使用标准的 glob 模式匹配。
- 匹配模式最后跟反斜杠（/）说明要忽略的是目录。
- 要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。

所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。

.gitignore 文件的例子：

```git
# 此为注释 – 将被 Git 忽略

# 忽略所有 .a 结尾的文件
*.a

# 但 lib.a 除外
!lib.a

# 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO
/TODO

# 忽略 build/ 目录下的所有文件
build/

# 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt
doc/*.txt
```

# 8.分支

在创建仓库时，Git 会自动创建一个名叫 `master` 的默认分支；

## 8.1查看分支

```
git branch
```

被*****标记的表示当前所在的分支

## 8.2创建分支

创建一个名叫dev的分支

```
git branch dev
```

再查看分支，会发现多了一个叫dev的分支

## 8.3切换分支

```
git checkout dev
```

表示切换到dev分支

## 8.4创建和切换分支一步完成

```git
git checkout -b bug
```

可以通过`git branch`查看一下是否创建了一个叫bug的新分支并且切换到该分支

## 8.5分支共用工作区

1.在 bug 分支下新增一个 `file2.txt` 文件，内容如下：

```
b
b
b
b
b
```

2.将该文件添加到暂存区，并提交：

```
git add -A
git commit -m "版本2"
```

3.切换到master分支

```
git checkout master
```

再看下工作区的内容会饭洗，刚才创建的文件file2.txt没有了，因为master下没有没有file2.txt文件，它再bug分支下；

说明了：

- 分支是共用工作区的；
- 切换分支时，Git会自动将工作区的内容切换到当前分支的内容；

## 8.6合并冲突

为了给大家演示一下冲突，我们先制造一些冲突；

1. 切换到 bug 分支 `git checkout bug` ；

2. 将 `file1.txt` 文件的第3行改成 `a4` ，内容如下：

   ```
   a
   a
   a4
   a
   a
   ```

1. 暂存并提交改动 `git commit -a -m "版本4"`；
2. 将 master 分支的变更合并到 当前分支（bug分支）：
   合并分支用 `merge` 命令，如下：

```
git merge master
```

从输出中，我们可以看到，合并失败了，因为 `file1.txt` 文件冲突了；如果没有冲突，合并就自动完成，并会弹出文本编辑器让你输出此次合并的提交信息；

为什么 `file1.txt` 文件会冲突了呢？
 因为 我们在 master 和 bug 分支下都改了第3行的内容，所以冲突了；

什么情况下才会冲突？

两个分支修改了同一文件的同一位置（简单来说，就是修改的内容有交叉）就会导致合并时产生冲突，如果修改的是不同文件 或者 是同一文件的不同位置，也不会导致冲突；

## 8.7查看冲突内容

我们可以使用如下命令查看冲突的内容

```
git diff
```

输出中显示出了冲突的文件`file1.txt`，和冲突的内容，其中 `<<<<<<<` 之上 和 `>>>>>>>` 之下的内容是共同的内容，非冲突的内容； `<<<<<<<`  和 `=======` 之间是当前分支中冲突的内容， `=======` 和 `>>>>>>>` 之间是其它分支中冲突的内容；

## 8.8解决冲突

由于语义的复杂性，Git 目前还不会帮我们自动解决冲突，我们需要自己来解决；

**如果此时我们想终止合并，可以使用如下命令：**

```
git merge --abort
```

**如果我们要继续合并，需要先解决冲突，解决冲突的方法如下：**

1. 根据需要决定如何保留和更改冲突的内容；
2. 移除冲突的标记文行 `<<<<<<<`、`=======`、`>>>>>>>`；
3. 使用 `add` 命令将冲突标记为已解决 `git add file1.txt` 或者 直接标识所有 `git add .`
4. 提交变更 `git commit`；

这会弹出文本编辑器让你输出此次合并的提交信息，里面默认有表达合并的操作的提交信息，使用默认的即可；

当冲突解决了并提交后，合并操作也就完成了；此时查看一下整个仓库的版本历史：

```
git log --all --graph
```

## 8.9删除分支

如果我们想删除一个分支（比如dev分支，我们可以使用一下命令）：

```
git branch -d dev
```

# 9.获取帮助

想了解Git的格式工具该怎么使用，可以阅读他们的使用帮助，方法有三个：

- `$ git help [命令]`
- `$ git [命令] --help`
- `$ man git`

比如，要学习 config 命令可以怎么用，运行：

```
$ git help config
```

帮助文档采用BNF语法格式描述规范描述命令行的语法，BNF语法格式的元字符及其含义如下：
 `[ ]`：可选内容；
 `< >`：必须给出内容；
 `{ }`：可重复0至无数次的内容；
 `a|b|c`：多选一；
 `…`：可以有多个；

*备注：关于BNF的详细内容可阅读参考《[语法格式描述规范BNF和ABNF](https://www.jianshu.com/p/15efcb0c06c8)》*





本文参考于[Git基础教程](https://www.jianshu.com/p/fd40460ffb37)，更多详细Git指令教程可阅读[Git命令手册](https://www.jianshu.com/p/769ee164f65b)

